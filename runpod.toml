# RunPod Project Configuration

[project]
name = "farmium-gpu-tools"
# uuid                   - Unique identifier for the project. Automatically generated.
#
# volume_mount_path      - Default volume mount path in serverless environment. Changing this may affect data persistence.
#
# base_image             - Base Docker image for the project environment. Includes essential packages and CUDA support.
#                        - Use 'runpod/base' as a starting point. Customize only if you need additional packages or configurations.
#
# gpu_types              - List of GPU types for your development pod. Order the types from most preferred to least preferred.
#                        - The pod uses the first available type from this list.
#                        - For a full list of supported GPU types, visit: https://docs.runpod.io/references/gpu-types
#
# gpu_count              - Number of GPUs to allocate for this pod.
#
# ports                  - Ports to expose and their protocols. Configure as needed for your application.
#
# container_disk_size_gb - Disk space allocated to the container. Adjust according to your needs.

uuid = "e6c332e1"
base_image = "runpod/base:0.6.1-cuda11.8.0"
gpu_types = [
    # DATACENTER GPUs - UNLIMITED NVENC sessions (best for batch video processing)
    "NVIDIA RTX A5000",         # 24GB - $0.38/hr - 10+ parallel videos per worker
    "NVIDIA RTX A6000",         # 48GB - $0.79/hr - 15+ parallel videos per worker
    "NVIDIA RTX A4000",         # 16GB - $0.29/hr - 10+ parallel videos per worker
    # CONSUMER GPUs - Limited to 3 NVENC sessions
    "NVIDIA GeForce RTX 3090",  # 24GB - $0.31/hr - 3 parallel videos per worker
    "NVIDIA GeForce RTX 4090",  # 24GB - $0.44/hr - 3 parallel videos per worker
]
gpu_count = 1  # Single GPU (parallel processing uses multiple NVENC sessions on same GPU)
volume_mount_path = "/runpod-volume"
ports = "4040/http, 7270/http, 22/tcp" # FileBrowser, FastAPI, SSH
container_disk_size_gb = 100

[project.env_vars]
# Set environment variables for the pod.
# For a full list of base environment variables, visit: https://github.com/runpod/containers/blob/main/official-templates/base/Dockerfile
#
# POD_INACTIVITY_TIMEOUT - Number of seconds before terminating the pod after a session ends. End a session with 'CTRL+C'.
#                        - You only pay for the pod until it terminates.
#
# RUNPOD_DEBUG_LEVEL     - Log level for RunPod. Set to 'debug' for detailed logs.
#
# UVICORN_LOG_LEVEL      - Log level for Uvicorn. Set to 'warning' for minimal logs.

POD_INACTIVITY_TIMEOUT = "120"
RUNPOD_DEBUG_LEVEL = "debug"
UVICORN_LOG_LEVEL = "warning"

[endpoint]
# Configure the deployed endpoint.
# For a full list of endpoint configurations, visit: https://docs.runpod.io/serverless/references/endpoint-configurations
#
# active_workers - The minimum number of workers your endpoint has running at any given point.
#                - Setting this amount to 1 or more runs that number of "always on" workers.
#                - These workers respond to job requests without any cold start delay.
#
# max_workers    - The maximum number of workers your endpoint has running at any given point.

active_workers = 0   # No always-on (flashboot keeps cold starts ~10-15s)
max_workers = 20     # Scale up to 20 workers for maximum parallel processing (matches UNLIMITED tier)
flashboot = true

[runtime]
# python_version    - Python version to use for the project.
#
# handler_path      - Path to the handler file for the project. Adapt example scripts from Hugging Face in this file.
#
# requirements_path - Path to the requirements file for the project. Add dependencies from Hugging Face in this file.

python_version = "3.10"
handler_path = "handler.py"
requirements_path = "requirements.txt"
